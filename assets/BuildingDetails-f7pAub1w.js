import{r as n,j as e,a as J,u as K}from"./index-CP3mjERF.js";import{i as c}from"./axios-D9plb12n.js";const Q=({buildingId:o,onExpenseChange:d})=>{const[u,A]=n.useState([]),[N,k]=n.useState([]),[r,m]=n.useState({expense_type_id:"",amount:"",date:"",description:""}),[i,w]=n.useState(!0),[h,y]=n.useState(null);n.useEffect(()=>{o&&(x(),S())},[o]);const x=async()=>{try{const s=await c.get(`/buildings/${o}/expenses`);A(s.data),y(null)}catch(s){console.error("Грешка при зареждане на разходите:",s),y("Възникна грешка при зареждане на разходите")}finally{w(!1)}},S=async()=>{try{const s=await c.get("/expense-types");k(s.data),y(null)}catch(s){console.error("Грешка при зареждане на типовете разходи:",s),y("Възникна грешка при зареждане на типовете разходи")}},$=async s=>{s.preventDefault();try{await c.post(`/buildings/${o}/expenses`,r),m({expense_type_id:"",amount:"",date:"",description:""}),await x(),d&&d(),alert("Разходът е добавен успешно!")}catch(_){console.error("Грешка при добавяне на разход:",_),alert("Възникна грешка при добавяне на разхода")}},l=async s=>{if(window.confirm("Сигурни ли сте, че искате да изтриете този разход?"))try{await c.delete(`/buildings/${o}/expenses/${s}`),await x(),d&&d(),alert("Разходът е изтрит успешно!")}catch(_){console.error("Грешка при изтриване на разход:",_),alert("Възникна грешка при изтриване на разхода")}},v=s=>new Date(s).toLocaleDateString("bg-BG",{year:"numeric",month:"2-digit",day:"2-digit"});return i?e.jsx("div",{className:"building-expenses",children:"Зареждане..."}):h?e.jsx("div",{className:"building-expenses error",children:h}):e.jsxs("div",{className:"building-expenses",children:[e.jsx("h2",{children:"Разходи на сградата"}),e.jsxs("form",{onSubmit:$,className:"expense-form",children:[e.jsxs("select",{value:r.expense_type_id,onChange:s=>m({...r,expense_type_id:s.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Изберете тип разход"}),N.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("input",{type:"number",placeholder:"Сума",value:r.amount,onChange:s=>m({...r,amount:s.target.value}),min:"0.01",step:"0.01",required:!0}),e.jsx("input",{type:"date",value:r.date,onChange:s=>m({...r,date:s.target.value}),required:!0}),e.jsx("input",{type:"text",placeholder:"Описание",value:r.description,onChange:s=>m({...r,description:s.target.value})}),e.jsx("button",{type:"submit",children:"Добави разход"})]}),e.jsx("div",{className:"expenses-list",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Дата"}),e.jsx("th",{children:"Тип разход"}),e.jsx("th",{children:"Сума"}),e.jsx("th",{children:"Описание"}),e.jsx("th",{children:"Действия"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:v(s.date)}),e.jsx("td",{children:s.expense_type_name}),e.jsxs("td",{children:[parseFloat(s.amount).toFixed(2)," лв."]}),e.jsx("td",{children:s.description}),e.jsx("td",{children:e.jsx("button",{onClick:()=>l(s.id),className:"delete-button",children:"Изтрий"})})]},s.id))})]})})]})},V=({floorId:o,onDataChange:d})=>{const[u,A]=n.useState([]),[N,k]=n.useState(null),[r,m]=n.useState({apartment_number:"",owner_name:"",area:""}),[i,w]=n.useState(null),[h,y]=n.useState([]),[x,S]=n.useState([]),[$,l]=n.useState({amount:"",date:"",description:""}),[v,s]=n.useState({amount:"",due_date:"",description:""});n.useEffect(()=>{o&&(_(),D())},[o]),n.useEffect(()=>{i&&q()},[i]);const _=async()=>{try{const t=await c.get(`/floors/${o}/apartments`);A(t.data)}catch(t){console.error("Грешка при зареждане на апартаментите:",t)}},D=async()=>{try{const t=await c.get(`/floors/${o}`);k(t.data)}catch(t){console.error("Грешка при зареждане на информацията за етажа:",t)}},q=async()=>{try{const[t,j]=await Promise.all([c.get(`/apartments/${i.id}/deposits`),c.get(`/apartments/${i.id}/obligations`)]);y(t.data),S(j.data)}catch(t){console.error("Грешка при зареждане на депозити и задължения:",t)}},U=async t=>{var F,L,a,f;if(t.preventDefault(),!r.apartment_number.trim()){alert("Моля, въведете номер на апартамента");return}if(!r.owner_name.trim()){alert("Моля, въведете име на собственика");return}if(!r.area||parseFloat(r.area)<=0){alert("Моля, въведете валидна площ (положително число)");return}if(u.find(g=>g.apartment_number===r.apartment_number)){alert("Апартамент с този номер вече съществува на този етаж");return}try{await c.post(`/floors/${o}/apartments`,{...r,floor_id:o,apartment_number:r.apartment_number.trim(),owner_name:r.owner_name.trim(),area:parseFloat(r.area)}),m({apartment_number:"",owner_name:"",area:""}),await _()}catch(g){console.error("Грешка при добавяне на апартамент:",g),(L=(F=g.response)==null?void 0:F.data)!=null&&L.error?alert(g.response.data.error):((a=g.response)==null?void 0:a.status)===404?alert("Етажът не е намерен. Моля, опреснете страницата."):((f=g.response)==null?void 0:f.status)===409?alert("Апартамент с този номер вече съществува на този етаж"):alert("Възникна грешка при добавяне на апартамента!")}},C=async t=>{t.preventDefault();try{await c.post(`/apartments/${i.id}/deposits`,$),l({amount:"",date:"",description:""}),q(),d&&d()}catch(j){console.error("Грешка при добавяне на депозит:",j)}},W=async t=>{t.preventDefault();try{await c.post(`/apartments/${i.id}/obligations`,v),s({amount:"",due_date:"",description:""}),q(),d&&d()}catch(j){console.error("Грешка при добавяне на задължение:",j)}},z=async t=>{if(window.confirm("Сигурни ли сте, че искате да изтриете този депозит?"))try{await c.delete(`/apartments/${i.id}/deposits/${t}`),q(),d&&d()}catch(F){console.error("Грешка при изтриване на депозит:",F),alert("Възникна грешка при изтриване на депозита!")}},H=async t=>{if(window.confirm("Сигурни ли сте, че искате да изтриете това задължение?"))try{await c.delete(`/apartments/${i.id}/obligations/${t}`),q(),d&&d()}catch(F){console.error("Грешка при изтриване на задължение:",F),alert("Възникна грешка при изтриване на задължението!")}},T=async t=>{var F,L;if(window.confirm("Сигурни ли сте, че искате да изтриете този апартамент?"))try{const a=await c.delete(`/apartments/${t}`);alert(a.data.message),await _(),i&&i.id===t&&(w(null),y([]),S([]))}catch(a){console.error("Грешка при изтриване на апартамент:",a),(L=(F=a.response)==null?void 0:F.data)!=null&&L.error?alert(a.response.data.error):alert("Възникна грешка при изтриване на апартамента!")}};return o?e.jsxs("div",{className:"apartment-list",children:[e.jsxs("h2",{children:["Управление на апартаменти - Етаж ",N==null?void 0:N.floor_number]}),N&&u.length<N.total_apartments&&e.jsxs("form",{onSubmit:U,className:"apartment-form",children:[e.jsx("input",{type:"text",placeholder:"Номер на апартамент",value:r.apartment_number,onChange:t=>m({...r,apartment_number:t.target.value}),required:!0}),e.jsx("input",{type:"text",placeholder:"Име на собственика",value:r.owner_name,onChange:t=>m({...r,owner_name:t.target.value}),required:!0}),e.jsx("input",{type:"number",placeholder:"Площ (кв.м)",value:r.area,onChange:t=>m({...r,area:t.target.value}),min:"0.01",step:"0.01",required:!0}),e.jsx("button",{type:"submit",children:"Добави апартамент"})]}),e.jsx("div",{className:"apartments-grid",children:u.map(t=>e.jsxs("div",{className:`apartment-card ${(i==null?void 0:i.id)===t.id?"selected":""}`,onClick:()=>w(t),children:[e.jsxs("h3",{children:["Апартамент ",t.apartment_number]}),e.jsxs("p",{children:["Собственик: ",t.owner_name]}),e.jsxs("p",{children:["Площ: ",t.area," кв.м"]}),e.jsx("button",{onClick:j=>{j.stopPropagation(),T(t.id)},children:"Изтрий"})]},t.id))}),i&&e.jsxs("div",{className:"apartment-details",children:[e.jsxs("h3",{children:["Детайли за апартамент ",i.apartment_number]}),e.jsxs("div",{className:"deposits-section",children:[e.jsx("h4",{children:"Депозити"}),e.jsxs("form",{onSubmit:C,className:"deposit-form",children:[e.jsx("input",{type:"number",placeholder:"Сума",value:$.amount,onChange:t=>{l({...$,amount:t.target.value})}}),e.jsx("input",{type:"date",value:$.date,onChange:t=>l({...$,date:t.target.value})}),e.jsx("input",{type:"text",placeholder:"Описание",value:$.description,onChange:t=>l({...$,description:t.target.value})}),e.jsx("button",{type:"submit",children:"Добави депозит"})]}),e.jsx("div",{className:"deposits-list",children:h.map(t=>e.jsxs("div",{className:"deposit-item",children:[e.jsxs("p",{children:["Сума: ",t.amount," лв."]}),e.jsxs("p",{children:["Дата: ",new Date(t.date).toLocaleDateString("bg-BG",{year:"numeric",month:"2-digit",day:"2-digit"})]}),e.jsxs("p",{children:["Описание: ",t.description]}),e.jsx("button",{onClick:j=>{j.stopPropagation(),z(t.id)},className:"delete-button",children:"Изтрий"})]},t.id))})]}),e.jsxs("div",{className:"obligations-section",children:[e.jsx("h4",{children:"Задължения"}),e.jsxs("form",{onSubmit:W,className:"obligation-form",children:[e.jsx("input",{type:"number",placeholder:"Сума",value:v.amount,onChange:t=>s({...v,amount:t.target.value})}),e.jsx("input",{type:"date",value:v.due_date,onChange:t=>s({...v,due_date:t.target.value})}),e.jsx("input",{type:"text",placeholder:"Описание",value:v.description,onChange:t=>s({...v,description:t.target.value})}),e.jsx("button",{type:"submit",children:"Добави задължение"})]}),e.jsx("div",{className:"obligations-list",children:x.filter(t=>!t.is_paid).map(t=>e.jsxs("div",{className:"obligation-item",children:[e.jsxs("p",{children:["Сума: ",t.amount," лв."]}),e.jsxs("p",{children:["Краен срок: ",new Date(t.due_date).toLocaleDateString("bg-BG",{year:"numeric",month:"2-digit",day:"2-digit"})]}),e.jsxs("p",{children:["Описание: ",t.description]}),e.jsx("button",{onClick:j=>{j.stopPropagation(),H(t.id)},className:"delete-button",children:"Изтрий"})]},t.id))})]})]})]}):e.jsx("div",{className:"apartment-list",children:"Моля, изберете етаж"})},X=({buildingId:o,onFloorSelect:d})=>{const[u,A]=n.useState([]),[N,k]=n.useState(!0),[r,m]=n.useState(null),[i,w]=n.useState({floor_number:"",total_apartments:""});n.useEffect(()=>{o&&(y(),h())},[o]);const h=async()=>{try{const l=await c.get(`/buildings/${o}`);m(l.data)}catch(l){console.error("Грешка при зареждане на информацията за сградата:",l)}},y=async()=>{try{const l=await c.get(`/buildings/${o}/floors`);A(l.data)}catch(l){console.error("Грешка при зареждане на етажите:",l)}finally{k(!1)}},x=async l=>{var s,_;if(l.preventDefault(),!r){alert("Грешка: Информацията за сградата не е налична");return}if(u.length>=r.total_floors){alert(`Не можете да добавите повече етажи. Максималният брой етажи за тази сграда е ${r.total_floors}`);return}if(u.some(D=>D.floor_number===parseInt(i.floor_number)&&!D.is_deleted)){alert(`Етаж ${i.floor_number} вече съществува в тази сграда!`);return}try{const D={floor_number:parseInt(i.floor_number),total_apartments:parseInt(i.total_apartments)};await c.post(`/buildings/${o}/floors`,D),w({floor_number:"",total_apartments:""}),y()}catch(D){console.error("Грешка при добавяне на етаж:",D),(_=(s=D.response)==null?void 0:s.data)!=null&&_.error?alert(D.response.data.error):alert("Възникна грешка при добавяне на етаж!")}},S=async l=>{if(window.confirm("Сигурни ли сте, че искате да изтриете този етаж?"))try{await c.delete(`/floors/${l}`),y()}catch(s){console.error("Грешка при изтриване на етаж:",s),alert("Възникна грешка при изтриване на етаж!")}},$=l=>{d(l)};return N?e.jsx("div",{className:"floor-list",children:"Зареждане..."}):o?e.jsxs("div",{className:"floor-list",children:[e.jsx("h2",{children:"Управление на етажи"}),r&&u.length<r.total_floors&&e.jsxs("form",{onSubmit:x,className:"floor-form",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"number",placeholder:"Номер на етаж",value:i.floor_number,onChange:l=>w({...i,floor_number:l.target.value}),required:!0})}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"number",placeholder:"Брой апартаменти",value:i.total_apartments,onChange:l=>w({...i,total_apartments:l.target.value}),required:!0})}),e.jsx("button",{type:"submit",children:"Добави етаж"})]}),e.jsx("div",{className:"floors-grid",children:u.map(l=>e.jsxs("div",{className:"floor-card",onClick:()=>$(l),children:[e.jsxs("h3",{children:["Етаж ",l.floor_number]}),e.jsxs("p",{children:["Брой апартаменти: ",l.total_apartments]}),e.jsx("button",{className:"delete-button",onClick:v=>{v.stopPropagation(),S(l.id)},children:"Изтрий"})]},l.id))})]}):e.jsx("div",{className:"floor-list",children:"Моля, изберете сграда"})},Y=({buildingId:o,onSuccess:d})=>{const[u,A]=n.useState({amount:"",due_date:"",description:""}),[N,k]=n.useState(!1),[r,m]=n.useState({text:"",type:""}),i=h=>{A({...u,[h.target.name]:h.target.value})},w=async h=>{var y,x;if(h.preventDefault(),!u.amount||!u.due_date||!u.description){m({text:"Моля, попълнете всички полета",type:"error"});return}try{k(!0);const S=await c.post(`/buildings/${o}/bulk-obligations`,u);k(!1),m({text:"Задълженията са добавени успешно!",type:"success"}),A({amount:"",due_date:"",description:""}),d&&typeof d=="function"&&d()}catch(S){k(!1),console.error("Грешка при добавяне на задължения:",S),m({text:((x=(y=S.response)==null?void 0:y.data)==null?void 0:x.message)||"Възникна грешка при добавяне на задълженията",type:"error"})}};return e.jsxs("div",{className:"bulk-obligations-container",children:[e.jsx("h3",{children:"Добавяне на задължение към всички апартаменти"}),r.text&&e.jsx("div",{className:`message ${r.type}`,children:r.text}),e.jsxs("form",{onSubmit:w,className:"bulk-obligations-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"amount",children:"Сума (лв.)"}),e.jsx("input",{type:"number",id:"amount",name:"amount",value:u.amount,onChange:i,placeholder:"Въведете сума",min:"0.01",step:"0.01",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"due_date",children:"Краен срок"}),e.jsx("input",{type:"date",id:"due_date",name:"due_date",value:u.due_date,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Описание"}),e.jsx("input",{type:"text",id:"description",name:"description",value:u.description,onChange:i,placeholder:"Напр. Такса общи части, Ремонт покрив и т.н.",required:!0})]}),e.jsx("button",{type:"submit",className:"bulk-obligations-button",disabled:N,children:N?"Добавяне...":"Добави задължение към всички апартаменти"})]})]})},ee=()=>{const{id:o}=J(),d=K(),[u,A]=n.useState([]),[N,k]=n.useState([]),[r,m]=n.useState(!0),[i,w]=n.useState(!1),[h,y]=n.useState({totalDeposits:0,totalObligations:0,totalExpenses:0,availableAmount:0}),[x,S]=n.useState(null),[$,l]=n.useState([]),[v,s]=n.useState(""),[_,D]=n.useState(null),[q,U]=n.useState(!1);n.useEffect(()=>{F()},[o]);const C=a=>{const f=parseFloat(a);return isNaN(f)?"0.00":f.toFixed(2)},W=async()=>{try{const a=await c.get(`/buildings/${o}/expenses`);return k(a.data),a.data}catch(a){return console.error("Грешка при зареждане на разходите:",a),[]}},z=async()=>{U(!q)},H=(a,f=[])=>{const g=a.reduce((p,P)=>{var O;return p+(((O=P.deposits)==null?void 0:O.reduce((M,G)=>M+(parseFloat(G.amount)||0),0))||0)},0),R=a.reduce((p,P)=>{var O;return p+(((O=P.obligations)==null?void 0:O.reduce((M,G)=>M+(G.is_paid?0:parseFloat(G.amount)||0),0))||0)},0),b=a.reduce((p,P)=>{var O;return p+(((O=P.obligations)==null?void 0:O.reduce((M,G)=>M+(G.is_paid&&parseFloat(G.amount)||0),0))||0)},0),E=f.reduce((p,P)=>p+(parseFloat(P.amount)||0),0),B=g+b-E;y({totalDeposits:g,totalObligations:R,totalExpenses:E,availableAmount:B})},T=async()=>{try{m(!0);const[a,f]=await Promise.all([c.get(`/buildings/${o}/floors`),W()]),R=a.data.map(p=>c.get(`/floors/${p.id}/apartments`)),E=(await Promise.all(R)).flatMap(p=>p.data),B=await Promise.all(E.map(async p=>{const[P,O]=await Promise.all([c.get(`/apartments/${p.id}/deposits`),c.get(`/apartments/${p.id}/obligations`)]);return{...p,deposits:P.data||[],obligations:O.data||[]}}));A(B),H(B,f)}catch(a){console.error("Грешка при зареждане на информацията:",a)}finally{m(!1)}},t=async(a,f,g)=>{try{const b=(await c.get(`/apartments/${a}/deposits`)).data,E=b.reduce((B,p)=>B+parseFloat(p.amount),0);if(E>=g){for(const p of b)await c.delete(`/apartments/${a}/deposits/${p.id}`);const B=E-g;B>0&&await c.post(`/apartments/${a}/deposits`,{amount:B,date:new Date().toISOString().split("T")[0],description:"Остатък след плащане на задължение"}),await c.put(`/obligations/${f}`,{is_paid:!0,is_paid_from_deposit:!0,payment_date:new Date().toISOString()})}else await c.put(`/obligations/${f}`,{is_paid:!0,is_paid_from_deposit:!1,payment_date:new Date().toISOString()});T()}catch(R){console.error("Грешка при плащане на задължение:",R),alert("Възникна грешка при плащане на задължението!")}},j=()=>{F()},F=async()=>{try{m(!0);const a=await c.get(`/buildings/${o}`);S(a.data);const f=await c.get(`/buildings/${o}/floors`);l(f.data),await T()}catch(a){console.error("Грешка при зареждане на детайли за сградата:",a),s("Възникна грешка при зареждане на детайли за сградата"),m(!1)}},L=async()=>{if(window.confirm("Сигурни ли сте, че искате да изтриете тази сграда? Това действие е необратимо."))try{await c.delete(`/buildings/${o}`),d("/buildings")}catch(a){console.error("Грешка при изтриване на сградата:",a),s("Възникна грешка при изтриване на сградата")}};return r?e.jsx("div",{className:"loading",children:"Зареждане..."}):v?e.jsx("div",{className:"error",children:v}):x?e.jsxs("div",{className:"building-details-container",children:[e.jsxs("div",{className:"building-header",children:[e.jsx("h2",{children:x.name}),e.jsxs("div",{className:"building-actions",children:[e.jsx("button",{className:"btn btn-delete",onClick:L,children:"Изтрий сграда"}),e.jsx("button",{className:"toggle-bulk-obligations",onClick:()=>w(!i),children:i?"Скрий":"Добави задължение към всички апартаменти"}),e.jsx("button",{className:"btn btn-back",onClick:()=>d("/buildings"),children:"Назад"})]}),i&&e.jsx(Y,{buildingId:o,onSuccess:()=>{j(),w(!1)}})]}),e.jsxs("div",{className:"building-info-card",children:[e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Адрес:"}),e.jsx("p",{children:x.address})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Брой етажи:"}),e.jsx("p",{children:x.total_floors})]}),x.description&&e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Описание:"}),e.jsx("p",{children:x.description})]})]}),e.jsxs("div",{className:"summary-section",children:[e.jsx("h3",{children:"Обобщение"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Общо депозити:"}),e.jsxs("span",{className:"amount",children:[C(h.totalDeposits)," лв."]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Общо задължения:"}),e.jsxs("span",{className:"amount",children:[C(h.totalObligations)," лв."]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Общо разходи:"}),e.jsxs("span",{className:"amount",children:[C(h.totalExpenses)," лв."]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Налична сума в касата:"}),e.jsxs("span",{className:"amount",children:[C(h.availableAmount)," лв."]})]})]})]}),e.jsxs("div",{className:"summary-section",children:[e.jsx("h3",{children:"Сградата разополага със следните средства за разходи"}),e.jsx("div",{className:"summary-grid",children:e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Налична сума в касата без депозити:"}),e.jsxs("span",{className:"amount",children:[C(h.availableAmount-h.totalDeposits)," лв."]})]})})]}),e.jsxs("div",{className:"floors-section",children:[e.jsx("h3",{children:"Етажи"}),e.jsx(X,{buildingId:o,onFloorSelect:a=>D(a)})]}),_&&e.jsxs("div",{className:"apartments-section",children:[e.jsxs("h3",{children:["Апартаменти на етаж ",_.floor_number]}),e.jsx(V,{floorId:_.id,onDataChange:T})]}),e.jsxs("div",{className:"apartments-section",children:[e.jsx("h3",{children:"Апартаменти"}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Етаж"}),e.jsx("th",{children:"Апартамент №"}),e.jsx("th",{children:"Собственик"}),e.jsx("th",{children:"Площ (кв.м)"}),e.jsx("th",{children:"Депозити"}),e.jsx("th",{children:"Задължения"}),e.jsx("th",{children:"Действия"})]})}),e.jsx("tbody",{children:u.map(a=>{const f=a.deposits.reduce((b,E)=>b+parseFloat(E.amount||0),0),g=a.obligations.filter(b=>!b.is_paid),R=g.reduce((b,E)=>b+parseFloat(E.amount||0),0);return e.jsxs("tr",{style:C(f)<C(R)?{backgroundColor:"rgba(0, 0, 0, 0.5)"}:{},children:[e.jsx("td",{children:a.floor_number}),e.jsx("td",{children:a.apartment_number}),e.jsx("td",{children:a.owner_name}),e.jsx("td",{children:a.area}),e.jsxs("td",{children:[C(f)," лв."]}),e.jsxs("td",{children:[C(R)," лв."]}),e.jsx("td",{children:g.map(b=>e.jsxs("button",{onClick:()=>{t(a.id,b.id,parseFloat(b.amount)),z()},className:"payment-button",children:["Плати ",C(b.amount)," лв.",e.jsx("br",{}),e.jsxs("small",{children:["Краен срок: ",new Date(b.due_date).toLocaleDateString("bg-BG",{year:"numeric",month:"2-digit",day:"2-digit"})]})]},b.id))})]},a.id)})})]})})]}),e.jsx(Q,{buildingId:o,onExpenseChange:()=>{T()}})]}):e.jsx("div",{className:"error",children:"Сградата не е намерена"})};export{ee as default};
