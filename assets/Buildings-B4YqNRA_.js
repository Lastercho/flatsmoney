import{r as i,j as s,L as n}from"./index-BhcDlnPk.js";import{i as b}from"./axios-D9plb12n.js";const v=()=>{const[r,u]=i.useState([]),[d,a]=i.useState(!0),[t,l]=i.useState(""),[o,h]=i.useState(!1);i.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await b.get("/buildings"),c=JSON.parse(localStorage.getItem("user")),m=c==null?void 0:c.id;if(!m){l("–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω–∞. –ú–æ–ª—è, –≤–ª–µ–∑—Ç–µ –æ—Ç–Ω–æ–≤–æ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞."),a(!1);return}const N=e.data.filter(g=>g.created_by===m);u(N),a(!1)}catch(e){l("–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å–≥—Ä–∞–¥–∏—Ç–µ"),console.error("–ì—Ä–µ—à–∫–∞:",e),a(!1)}},j=async()=>{h(!0),l("");try{await x()}finally{setTimeout(()=>h(!1),500)}};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"page-content",children:s.jsxs("div",{className:"buildings-container",children:[s.jsxs("div",{className:"buildings-header",children:[s.jsxs("div",{className:"buildings-title",children:[s.jsx("h2",{children:"–ú–æ–∏—Ç–µ —Å–≥—Ä–∞–¥–∏"}),s.jsx("p",{className:"buildings-subtitle",children:"–£–ø—Ä–∞–≤–ª—è–≤–∞–π—Ç–µ –≤–∞—à–∏—Ç–µ —Å–≥—Ä–∞–¥–∏ –∏ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏"})]}),s.jsxs("div",{className:"buildings-actions",children:[s.jsx("button",{onClick:j,className:"btn-refresh",disabled:o||d,title:"–û–±–Ω–æ–≤–∏ —Å–ø–∏—Å—ä–∫–∞",children:o?"‚ü≥":"‚Üª"}),s.jsxs(n,{to:"/chess",className:"btn-add",title:"–°—Ç–∞—Ä—Ç–∏—Ä–∞–π —à–∞—Ö",children:[s.jsx("span",{className:"btn-icon",children:"‚ôüÔ∏è"})," –®–∞—Ö"]}),s.jsxs(n,{to:"/buildings/new",className:"btn-add",children:[s.jsx("span",{className:"btn-icon",children:"+"})," –î–æ–±–∞–≤–∏ —Å–≥—Ä–∞–¥–∞"]})]})]}),d?s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å–≥—Ä–∞–¥–∏..."})]}):t?s.jsxs("div",{className:"error-container",children:[s.jsx("div",{className:"error-icon",children:"‚ö†Ô∏è"}),s.jsx("p",{children:t}),s.jsx("button",{onClick:j,className:"btn-retry",children:"–û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ"})]}):r.length===0?s.jsxs("div",{className:"no-buildings",children:[s.jsx("div",{className:"empty-state-icon",children:"üè¢"}),s.jsx("h3",{children:"–í—Å–µ –æ—â–µ –Ω—è–º–∞—Ç–µ –¥–æ–±–∞–≤–µ–Ω–∏ —Å–≥—Ä–∞–¥–∏"}),s.jsx("p",{children:"–ó–∞–ø–æ—á–Ω–µ—Ç–µ –∫–∞—Ç–æ –¥–æ–±–∞–≤–∏—Ç–µ –≤–∞—à–∞—Ç–∞ –ø—ä—Ä–≤–∞ —Å–≥—Ä–∞–¥–∞"}),s.jsx(n,{to:"/buildings/new",className:"btn-add-first",children:"–î–æ–±–∞–≤–∏ –ø—ä—Ä–≤–∞ —Å–≥—Ä–∞–¥–∞"})]}):s.jsx("div",{className:"buildings-grid",children:r.map(e=>s.jsxs("div",{className:"building-card",children:[s.jsxs("div",{className:"building-card-header",children:[s.jsx("h3",{children:e.name}),e.description&&s.jsx("div",{className:"building-description-tooltip",title:e.description,children:"‚ÑπÔ∏è"})]}),s.jsxs("div",{className:"building-card-body",children:[s.jsxs("div",{className:"building-info",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-icon",children:"üìç"}),s.jsxs("p",{children:[s.jsx("strong",{children:"–ê–¥—Ä–µ—Å:"})," ",e.address]})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-icon",children:"üè¢"}),s.jsxs("p",{children:[s.jsx("strong",{children:"–ï—Ç–∞–∂–∏:"})," ",e.total_floors]})]})]}),s.jsx("div",{className:"building-actions",children:s.jsx(n,{to:`/buildings/${e.id}`,className:"btn-view",children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"})})]})]},e.id))})]})})})};export{v as default};
